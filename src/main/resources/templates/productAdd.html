<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="_layout">
<head>
    <meta charset="UTF-8">
    <title>Product Add</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
</head>
<body>
<!--<div layout:fragment="content" class="container col-md-5 mt-4">-->
<!--    <h3>Add a new Product</h3>-->
<!--    <div class="card">-->
<!--        <div class="card-body">-->
<!--            <form th:action="'/admin/product/save'" th:object="${product}" method="post" enctype="multipart/form-data">-->
<!--                <h2 class="text-center text-primary">ADD NEW PRODUCT</h2>-->
<!--                <input type="hidden" name="id" th:field="*{productId}">-->
<!--                <fieldset class="form-group">-->
<!--                    <label>Product name </label>-->
<!--                    <input class="form-control" type="text" th:field="*{productName}">-->
<!--                    <p th:if="${#fields.hasErrors('productName')}" th:errorclass="error" th:errors="*{productName}" />-->
<!--                </fieldset>-->
<!--                <fieldset>-->
<!--                    <label>Price</label>-->
<!--                    <input class="form-control" type="number" th:field="*{price}">-->
<!--                    <p th:if="${#fields.hasErrors('price')}" th:errorclass="error" th:errors="*{price}" />-->
<!--                </fieldset>-->

<!--                <fieldset>-->
<!--                    <p>Product Image</p>-->
<!--                    <div class="custom-file">-->
<!--                        <input type="file"  class="custom-file-input" name="productImage" accept="image/jpeg, image/png"  id="productImage"/>-->
<!--                        <label class="custom-file-label" for="productImage">Choose file</label>-->
<!--                    </div>-->
<!--                    <div class="form-group">-->
<!--                        <img src="#" id="imgPreview" height="100px" width="100px" th:src="@{${'/productImages/' + product.imageName}}" style="margin-top: 20px" alt=" ">-->
<!--                    </div>-->
<!--                    <input type="hidden" name="imgName" th:value="${product.imageName}">-->
<!--                </fieldset>-->

<!--                <fieldset class="form-group">-->
<!--                    <label for="description">Product Description</label>-->
<!--                    <textarea class="form-control" rows="5" th:field="*{description}" name="description" id="description"></textarea>-->
<!--                </fieldset>-->
<!--                <div class="col text-center mt-3">-->
<!--                    <button type="submit" class="btn btn-success">SUBMIT</button>-->
<!--                </div>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<div layout:fragment="content" class="container">
    <h3 class="text text-primary">Add a new Product</h3>
    <form th:action="'/admin/product/save'" th:object="${product}" method="post" enctype="multipart/form-data">
        <div class="row">
            <div class="col-sm-5">

                <input type="hidden" name="id" th:field="*{productId}">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" required th:field="*{productName}" name="name" id="name"
                           placeholder="Enter name">
                </div>
                <div class="form-group">
                    <label >Select Category</label>
                    <select th:field="*{subCategory}" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example">
                        <option th:each="cat : ${subCategoryList}" th:value="${cat.id}" th:text="${cat.name}"/>
                    </select>
                </div>
                <div class="form-group">
                    <label for="price">Price</label>
                    <input type="number" class="form-control" required th:field="*{price}" name="price" id="price"
                           placeholder="Price">
                </div>
                <div class="form-group">
                    <label for="description">Product Description</label>
                    <textarea class="form-control" rows="5" th:field="*{description}" name="description" id="description"></textarea>
                </div>
            </div>
            <div class="col-sm-5">
                <p>Product Image</p>
                <div class="custom-file">
                    <input type="file"  class="custom-file-input" name="productImage" accept="image/jpeg, image/png"  id="productImage"/>
                    <label class="custom-file-label" for="productImage">Choose file</label>
                </div>
                <div class="form-group">
                    <img src="#" id="imgPreview" height="100px" width="100px" th:src="@{${'/productImages/' + product.imageName}}" style="margin-top: 20px" alt=" ">
                </div>
                <input type="hidden" name="imgName" th:value="${product.imageName}">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </form>
    <div class="row">
        <a th:href="'/admin/product/list'">
            <button class="btn btn-success">Back To List</button>
        </a>
    </div>
</div>
<script>
    function readURL(input){
        if(input.files && input.files[0]){
            var reader = new FileReader();
            reader.onload = function(e){
                $('#imgPreview').attr('src', e.target.result).width(100).height(100);
            }
            reader.readAsDataURL(input.files[0])
        }
    }
    $('#productImage').change(function(){
        readURL(this);
    });
    $(".custom-file-input").on("change", function() {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
</script>
</body>
</html>
